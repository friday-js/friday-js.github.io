<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>多表查询 | 小苏同学的能量补给站</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="./logo.jpg">
    <meta name="description" content="前端程序员一枚">
    
    <link rel="preload" href="/assets/css/0.styles.6d920bc0.css" as="style"><link rel="preload" href="/assets/js/app.656a9eeb.js" as="script"><link rel="preload" href="/assets/js/2.b8e5fd1e.js" as="script"><link rel="preload" href="/assets/js/84.e83b75ba.js" as="script"><link rel="prefetch" href="/assets/js/10.fb34b5e3.js"><link rel="prefetch" href="/assets/js/11.a5f80018.js"><link rel="prefetch" href="/assets/js/12.c823c499.js"><link rel="prefetch" href="/assets/js/13.3c445d64.js"><link rel="prefetch" href="/assets/js/14.f8f88f5a.js"><link rel="prefetch" href="/assets/js/15.299ac4f0.js"><link rel="prefetch" href="/assets/js/16.a609bc87.js"><link rel="prefetch" href="/assets/js/17.94d98ebf.js"><link rel="prefetch" href="/assets/js/18.c7ecc22f.js"><link rel="prefetch" href="/assets/js/19.526cd7f3.js"><link rel="prefetch" href="/assets/js/20.a3b47ae6.js"><link rel="prefetch" href="/assets/js/21.46705d82.js"><link rel="prefetch" href="/assets/js/22.383cf416.js"><link rel="prefetch" href="/assets/js/23.4dd98101.js"><link rel="prefetch" href="/assets/js/24.d615668c.js"><link rel="prefetch" href="/assets/js/25.97489243.js"><link rel="prefetch" href="/assets/js/26.71fa172f.js"><link rel="prefetch" href="/assets/js/27.94660f5c.js"><link rel="prefetch" href="/assets/js/28.01a5c991.js"><link rel="prefetch" href="/assets/js/29.9468ef95.js"><link rel="prefetch" href="/assets/js/3.e997c09c.js"><link rel="prefetch" href="/assets/js/30.1935b96a.js"><link rel="prefetch" href="/assets/js/31.c15e98c8.js"><link rel="prefetch" href="/assets/js/32.551aaea5.js"><link rel="prefetch" href="/assets/js/33.030b39d0.js"><link rel="prefetch" href="/assets/js/34.5c55ee19.js"><link rel="prefetch" href="/assets/js/35.9b4a1763.js"><link rel="prefetch" href="/assets/js/36.0a928a90.js"><link rel="prefetch" href="/assets/js/37.9195e847.js"><link rel="prefetch" href="/assets/js/38.9f7c84e8.js"><link rel="prefetch" href="/assets/js/39.c1b4079a.js"><link rel="prefetch" href="/assets/js/4.f0f72fd4.js"><link rel="prefetch" href="/assets/js/40.75dfee7a.js"><link rel="prefetch" href="/assets/js/41.1d79fac3.js"><link rel="prefetch" href="/assets/js/42.f0e2061d.js"><link rel="prefetch" href="/assets/js/43.ce04c129.js"><link rel="prefetch" href="/assets/js/44.ceef5570.js"><link rel="prefetch" href="/assets/js/45.5662cf5c.js"><link rel="prefetch" href="/assets/js/46.e5a47084.js"><link rel="prefetch" href="/assets/js/47.08157db5.js"><link rel="prefetch" href="/assets/js/48.a201b441.js"><link rel="prefetch" href="/assets/js/49.9d324da2.js"><link rel="prefetch" href="/assets/js/5.cec6138f.js"><link rel="prefetch" href="/assets/js/50.c985b225.js"><link rel="prefetch" href="/assets/js/51.bb2f9181.js"><link rel="prefetch" href="/assets/js/52.ad05b953.js"><link rel="prefetch" href="/assets/js/53.a1140ad4.js"><link rel="prefetch" href="/assets/js/54.54913a93.js"><link rel="prefetch" href="/assets/js/55.8dd83168.js"><link rel="prefetch" href="/assets/js/56.43f79df1.js"><link rel="prefetch" href="/assets/js/57.c5272328.js"><link rel="prefetch" href="/assets/js/58.35ad7bd9.js"><link rel="prefetch" href="/assets/js/59.06752557.js"><link rel="prefetch" href="/assets/js/6.a72b95d8.js"><link rel="prefetch" href="/assets/js/60.696f345b.js"><link rel="prefetch" href="/assets/js/61.ff61c449.js"><link rel="prefetch" href="/assets/js/62.66abe987.js"><link rel="prefetch" href="/assets/js/63.5b518832.js"><link rel="prefetch" href="/assets/js/64.2e35b9fd.js"><link rel="prefetch" href="/assets/js/65.8b2770e1.js"><link rel="prefetch" href="/assets/js/66.9ea41a41.js"><link rel="prefetch" href="/assets/js/67.7b8a4b55.js"><link rel="prefetch" href="/assets/js/68.305d16a0.js"><link rel="prefetch" href="/assets/js/69.55b92c51.js"><link rel="prefetch" href="/assets/js/7.8d321e7d.js"><link rel="prefetch" href="/assets/js/70.ce62b829.js"><link rel="prefetch" href="/assets/js/71.a384031c.js"><link rel="prefetch" href="/assets/js/72.7883174b.js"><link rel="prefetch" href="/assets/js/73.f50e85aa.js"><link rel="prefetch" href="/assets/js/74.91ced031.js"><link rel="prefetch" href="/assets/js/75.4b9424af.js"><link rel="prefetch" href="/assets/js/76.a79ecbee.js"><link rel="prefetch" href="/assets/js/77.6af203f2.js"><link rel="prefetch" href="/assets/js/78.46584f1c.js"><link rel="prefetch" href="/assets/js/79.670bf5b5.js"><link rel="prefetch" href="/assets/js/8.154e9d37.js"><link rel="prefetch" href="/assets/js/80.e9d92fd5.js"><link rel="prefetch" href="/assets/js/81.e7996008.js"><link rel="prefetch" href="/assets/js/82.3d65a9d1.js"><link rel="prefetch" href="/assets/js/83.4854f6d1.js"><link rel="prefetch" href="/assets/js/85.1525768a.js"><link rel="prefetch" href="/assets/js/9.251478b1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6d920bc0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小苏同学的能量补给站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端笔记" class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端笔记" class="mobile-dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          HTML&amp;CSS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/nodes/html/基础知识.html" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/css/基础知识.html" class="nav-link">
  CSS
</a></li></ul></li><li class="dropdown-item"><h4>
          JavaScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/nodes/javascript/ECMAScript/JavaScript起步.html" class="nav-link">
  ECMAScript
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/javascript/WebAPI/DOM.html" class="nav-link">
  WebAPI
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/javascript/ES6/ES6.html" class="nav-link">
  ES6
</a></li></ul></li><li class="dropdown-item"><h4>
          前端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/nodes/vue/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/react/react.html" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/angular/angular.html" class="nav-link">
  Angular
</a></li></ul></li><li class="dropdown-item"><h4>
          扩展
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/nodes/node/node.html" class="nav-link">
  node
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/git/git.html" class="nav-link">
  git
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/typescript/typescript.html" class="nav-link">
  typescript
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/guide/java/" class="nav-link">
  后端笔记
</a></div><div class="nav-item"><a href="/guide/sql/基础.html" class="nav-link">
  SQL笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试宝典" class="dropdown-title"><span class="title">面试宝典</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试宝典" class="mobile-dropdown-title"><span class="title">面试宝典</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端宝典
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/interview/h5c3/H5C3.html" class="nav-link">
  H5C3
</a></li><li class="dropdown-subitem"><a href="/guide/interview/javascript/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/guide/interview/es6/es6.html" class="nav-link">
  ES6
</a></li><li class="dropdown-subitem"><a href="/guide/interview/jquery/jquery.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-subitem"><a href="/guide/interview/git/git.html" class="nav-link">
  Git
</a></li><li class="dropdown-subitem"><a href="/guide/interview/node/node.html" class="nav-link">
  NodeJS
</a></li><li class="dropdown-subitem"><a href="/guide/interview/webpack/webpack.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-subitem"><a href="/guide/interview/vue/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/guide/interview/react/react.html" class="nav-link">
  React
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="扩展" class="dropdown-title"><span class="title">扩展</span> <span class="arrow down"></span></button> <button type="button" aria-label="扩展" class="mobile-dropdown-title"><span class="title">扩展</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/extend/ajax&amp;axios.html" class="nav-link">
  ajax和axios
</a></li><li class="dropdown-subitem"><a href="/guide/extend/javascript.html" class="nav-link">
  javascript兼容
</a></li></ul></li><li class="dropdown-item"><h4>
          包管理工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/extend/nvm&amp;npm&amp;yarn.html" class="nav-link">
  nvm、npm和yarn
</a></li></ul></li><li class="dropdown-item"><h4>
          常用快捷键
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/extend/code.html" class="nav-link">
  快捷键
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.bitbug.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ico图标制作
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://www.spritecow.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  精灵图测量
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          程序员社区
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://segmentfault.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  思否
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          程序员文档
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://es6.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ES6-阮一峰
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端笔记" class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端笔记" class="mobile-dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          HTML&amp;CSS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/nodes/html/基础知识.html" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/css/基础知识.html" class="nav-link">
  CSS
</a></li></ul></li><li class="dropdown-item"><h4>
          JavaScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/nodes/javascript/ECMAScript/JavaScript起步.html" class="nav-link">
  ECMAScript
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/javascript/WebAPI/DOM.html" class="nav-link">
  WebAPI
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/javascript/ES6/ES6.html" class="nav-link">
  ES6
</a></li></ul></li><li class="dropdown-item"><h4>
          前端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/nodes/vue/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/react/react.html" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/angular/angular.html" class="nav-link">
  Angular
</a></li></ul></li><li class="dropdown-item"><h4>
          扩展
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/nodes/node/node.html" class="nav-link">
  node
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/git/git.html" class="nav-link">
  git
</a></li><li class="dropdown-subitem"><a href="/guide/nodes/typescript/typescript.html" class="nav-link">
  typescript
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/guide/java/" class="nav-link">
  后端笔记
</a></div><div class="nav-item"><a href="/guide/sql/基础.html" class="nav-link">
  SQL笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试宝典" class="dropdown-title"><span class="title">面试宝典</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试宝典" class="mobile-dropdown-title"><span class="title">面试宝典</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端宝典
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/interview/h5c3/H5C3.html" class="nav-link">
  H5C3
</a></li><li class="dropdown-subitem"><a href="/guide/interview/javascript/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/guide/interview/es6/es6.html" class="nav-link">
  ES6
</a></li><li class="dropdown-subitem"><a href="/guide/interview/jquery/jquery.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-subitem"><a href="/guide/interview/git/git.html" class="nav-link">
  Git
</a></li><li class="dropdown-subitem"><a href="/guide/interview/node/node.html" class="nav-link">
  NodeJS
</a></li><li class="dropdown-subitem"><a href="/guide/interview/webpack/webpack.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-subitem"><a href="/guide/interview/vue/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/guide/interview/react/react.html" class="nav-link">
  React
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="扩展" class="dropdown-title"><span class="title">扩展</span> <span class="arrow down"></span></button> <button type="button" aria-label="扩展" class="mobile-dropdown-title"><span class="title">扩展</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/extend/ajax&amp;axios.html" class="nav-link">
  ajax和axios
</a></li><li class="dropdown-subitem"><a href="/guide/extend/javascript.html" class="nav-link">
  javascript兼容
</a></li></ul></li><li class="dropdown-item"><h4>
          包管理工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/extend/nvm&amp;npm&amp;yarn.html" class="nav-link">
  nvm、npm和yarn
</a></li></ul></li><li class="dropdown-item"><h4>
          常用快捷键
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/guide/extend/code.html" class="nav-link">
  快捷键
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.bitbug.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ico图标制作
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://www.spritecow.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  精灵图测量
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          程序员社区
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://segmentfault.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  思否
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          程序员文档
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://es6.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ES6-阮一峰
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/guide/sql/基础.html" class="sidebar-link">MySQL基础</a></li><li><a href="/guide/sql/约束.html" class="sidebar-link">MySQL约束</a></li><li><a href="/guide/sql/多表&amp;事务.html" class="active sidebar-link">MySQL多表&amp;事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/sql/多表&amp;事务.html#多表查询" class="sidebar-link">多表查询</a></li><li class="sidebar-sub-header"><a href="/guide/sql/多表&amp;事务.html#事务" class="sidebar-link">事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/sql/多表&amp;事务.html#事务的基本介绍" class="sidebar-link">事务的基本介绍</a></li><li class="sidebar-sub-header"><a href="/guide/sql/多表&amp;事务.html#事务的四大特征" class="sidebar-link">事务的四大特征：</a></li><li class="sidebar-sub-header"><a href="/guide/sql/多表&amp;事务.html#事务的隔离级别-了解" class="sidebar-link">事务的隔离级别（了解）</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/sql/多表&amp;事务.html#dcl" class="sidebar-link">DCL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/sql/多表&amp;事务.html#sql分类" class="sidebar-link">SQL分类</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="多表查询"><a href="#多表查询" class="header-anchor">#</a> 多表查询</h2> <p>* 查询语法：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>select
	列名列表
from
	表名列表
where....
</code></pre></div><p>* 准备sql</p> <div class="language-mysql extra-class"><pre class="language-text"><code># 创建部门表
CREATE TABLE dept(
	id INT PRIMARY KEY AUTO_INCREMENT,
	NAME VARCHAR(20)
);
INSERT INTO dept (NAME) VALUES ('开发部'),('市场部'),('财务部');

# 创建员工表
CREATE TABLE emp (
	id INT PRIMARY KEY AUTO_INCREMENT,
	NAME VARCHAR(10),
	gender CHAR(1), -- 性别
	salary DOUBLE, -- 工资
	join_date DATE, -- 入职日期
	dept_id INT,
	FOREIGN KEY (dept_id) REFERENCES dept(id) -- 外键，关联部门表(部门表的主键)
);

INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES('孙悟空','男',7200,'2013-02-24',1);
INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES('猪八戒','男',3600,'2010-12-02',2);
INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES('唐僧','男',9000,'2008-08-08',2);
INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES('白骨精','女',5000,'2015-10-07',3);
INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES('蜘蛛精','女',4500,'2011-03-14',1);
</code></pre></div><p>* 笛卡尔积：</p> <p>​    * 有两个集合A,B .取这两个集合的所有组成情况。</p> <p>​    * 要完成多表查询，需要消除无用的数据</p> <p>* 多表查询的分类：</p> <p>​    \1. 内连接查询：</p> <p>​       \1. 隐式内连接：使用where条件消除无用数据</p> <p>​           * 例子：</p> <p>​</p> <div class="language-mysql extra-class"><pre class="language-text"><code>-- 查询所有员工信息和对应的部门信息
SELECT * FROM emp,dept WHERE emp.`dept_id` = dept.`id`;

-- 查询员工表的名称，性别。部门表的名称
SELECT emp.name,emp.gender,dept.name FROM emp,dept WHERE emp.`dept_id` = dept.`id`;

SELECT
	t1.name, -- 员工表的姓名
	t1.gender,-- 员工表的性别
	t2.name -- 部门表的名称
FROM
	emp t1,
	dept t2
WHERE
	t1.`dept_id` = t2.`id`;
</code></pre></div><p>​</p> <p>​</p> <p>​</p> <p>​</p> <p>​       \2. 显式内连接：</p> <p>​           * 语法： select 字段列表 from 表名1 [inner] join 表名2 on 条件</p> <p>​           * 例如：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT * FROM emp INNER JOIN dept ON emp.`dept_id` = dept.`id`;   
SELECT * FROM emp JOIN dept ON emp.`dept_id` = dept.`id`;  
</code></pre></div><p>​       \3. 内连接查询：</p> <p>​           \1. 从哪些表中查询数据</p> <p>​           \2. 条件是什么</p> <p>​           \3. 查询哪些字段</p> <p>​    \2. 外链接查询：</p> <p>​       \1. 左外连接：</p> <p>​           * 语法：select 字段列表 from 表1 left [outer] join 表2 on 条件；</p> <p>​           * 查询的是左表所有数据以及其交集部分。</p> <p>​           * 例子：</p> <p>​              -- 查询所有员工信息，如果员工有部门，则查询部门名称，没有部门，则不显示部门名称</p> <p>​              SELECT    t1.*,t2.<code>name</code> FROM emp t1 LEFT JOIN dept t2 ON t1.<code>dept_id</code> = t2.<code>id</code>;</p> <p>​       \2. 右外连接：</p> <p>​           * 语法：select 字段列表 from 表1 right [outer] join 表2 on 条件；</p> <p>​           * 查询的是右表所有数据以及其交集部分。</p> <p>​           * 例子：</p> <p>​              SELECT * FROM dept t2 RIGHT JOIN emp t1 ON t1.<code>dept_id</code> = t2.<code>id</code>;</p> <p>​    \3. 子查询：</p> <p>​       * 概念：查询中嵌套查询，称嵌套查询为子查询。</p> <p>​           -- 查询工资最高的员工信息</p> <p>​           -- 1 查询最高的工资是多少 9000</p> <p>​           SELECT MAX(salary) FROM emp;</p> <p>​</p> <p>​           -- 2 查询员工信息，并且工资等于9000的</p> <p>​           SELECT * FROM emp WHERE emp.<code>salary</code> = 9000;</p> <p>​</p> <p>​           -- 一条sql就完成这个操作。子查询</p> <p>​           SELECT * FROM emp WHERE emp.<code>salary</code> = (SELECT MAX(salary) FROM emp);</p> <p>​       * 子查询不同情况</p> <p>​           \1. 子查询的结果是单行单列的：</p> <p>​              * 子查询可以作为条件，使用运算符去判断。 运算符： &gt; &gt;= &lt; &lt;= =</p> <p>​              *</p> <p>​              -- 查询员工工资小于平均工资的人</p> <p>​              SELECT * FROM emp WHERE emp.salary &lt; (SELECT AVG(salary) FROM emp);</p> <p>​           \2. 子查询的结果是多行单列的：</p> <p>​              * 子查询可以作为条件，使用运算符in来判断</p> <p>​              -- 查询'财务部'和'市场部'所有的员工信息</p> <p>​              SELECT id FROM dept WHERE NAME = '财务部' OR NAME = '市场部';</p> <p>​              SELECT * FROM emp WHERE dept_id = 3 OR dept_id = 2;</p> <p>​              -- 子查询</p> <p>​              SELECT * FROM emp WHERE dept_id IN (SELECT id FROM dept WHERE NAME = '财务部' OR NAME = '市场部');</p> <p>​           \3. 子查询的结果是多行多列的：</p> <p>​              * 子查询可以作为一张虚拟表参与查询</p> <p>​              -- 查询员工入职日期是2011-11-11日之后的员工信息和部门信息</p> <p>​              -- 子查询</p> <p>​              SELECT * FROM dept t1 ,(SELECT * FROM emp WHERE emp.<code>join_date</code> &gt; '2011-11-11') t2</p> <p>​              WHERE t1.id = t2.dept_id;</p> <p>​</p> <p>​              -- 普通内连接</p> <p>​              SELECT * FROM emp t1,dept t2 WHERE t1.<code>dept_id</code> = t2.<code>id</code> AND t1.<code>join_date</code> &gt; '2011-11-11'</p> <p>​    * 多表查询练习</p> <p>​           -- 部门表</p> <p>​           CREATE TABLE dept (</p> <p>​               id INT PRIMARY KEY PRIMARY KEY, -- 部门id</p> <p>​               dname VARCHAR(50), -- 部门名称</p> <p>​               loc VARCHAR(50) -- 部门所在地</p> <p>​           );</p> <p>​</p> <p>​           -- 添加4个部门</p> <p>​           INSERT INTO dept(id,dname,loc) VALUES</p> <p>​           (10,'教研部','北京'),</p> <p>​           (20,'学工部','上海'),</p> <p>​           (30,'销售部','广州'),</p> <p>​           (40,'财务部','深圳');</p> <p>​</p> <p>​</p> <p>​</p> <p>​           -- 职务表，职务名称，职务描述</p> <p>​           CREATE TABLE job (</p> <p>​               id INT PRIMARY KEY,</p> <p>​               jname VARCHAR(20),</p> <p>​               description VARCHAR(50)</p> <p>​           );</p> <p>​</p> <p>​           -- 添加4个职务</p> <p>​           INSERT INTO job (id, jname, description) VALUES</p> <p>​           (1, '董事长', '管理整个公司，接单'),</p> <p>​           (2, '经理', '管理部门员工'),</p> <p>​           (3, '销售员', '向客人推销产品'),</p> <p>​           (4, '文员', '使用办公软件');</p> <p>​</p> <p>​</p> <p>​</p> <p>​           -- 员工表</p> <p>​           CREATE TABLE emp (</p> <p>​               id INT PRIMARY KEY, -- 员工id</p> <p>​               ename VARCHAR(50), -- 员工姓名</p> <p>​               job_id INT, -- 职务id</p> <p>​               mgr INT , -- 上级领导</p> <p>​               joindate DATE, -- 入职日期</p> <p>​               salary DECIMAL(7,2), -- 工资</p> <p>​               bonus DECIMAL(7,2), -- 奖金</p> <p>​               dept_id INT, -- 所在部门编号</p> <p>​               CONSTRAINT emp_jobid_ref_job_id_fk FOREIGN KEY (job_id) REFERENCES job (id),</p> <p>​               CONSTRAINT emp_deptid_ref_dept_id_fk FOREIGN KEY (dept_id) REFERENCES dept (id)</p> <p>​           );</p> <p>​</p> <p>​           -- 添加员工</p> <p>​           INSERT INTO emp(id,ename,job_id,mgr,joindate,salary,bonus,dept_id) VALUES</p> <p>​           (1001,'孙悟空',4,1004,'2000-12-17','8000.00',NULL,20),</p> <p>​           (1002,'卢俊义',3,1006,'2001-02-20','16000.00','3000.00',30),</p> <p>​           (1003,'林冲',3,1006,'2001-02-22','12500.00','5000.00',30),</p> <p>​           (1004,'唐僧',2,1009,'2001-04-02','29750.00',NULL,20),</p> <p>​           (1005,'李逵',4,1006,'2001-09-28','12500.00','14000.00',30),</p> <p>​           (1006,'宋江',2,1009,'2001-05-01','28500.00',NULL,30),</p> <p>​           (1007,'刘备',2,1009,'2001-09-01','24500.00',NULL,10),</p> <p>​           (1008,'猪八戒',4,1004,'2007-04-19','30000.00',NULL,20),</p> <p>​           (1009,'罗贯中',1,NULL,'2001-11-17','50000.00',NULL,10),</p> <p>​           (1010,'吴用',3,1006,'2001-09-08','15000.00','0.00',30),</p> <p>​           (1011,'沙僧',4,1004,'2007-05-23','11000.00',NULL,20),</p> <p>​           (1012,'李逵',4,1006,'2001-12-03','9500.00',NULL,30),</p> <p>​           (1013,'小白龙',4,1004,'2001-12-03','30000.00',NULL,20),</p> <p>​           (1014,'关羽',4,1007,'2002-01-23','13000.00',NULL,10);</p> <p>​</p> <p>​</p> <p>​</p> <p>​           -- 工资等级表</p> <p>​           CREATE TABLE salarygrade (</p> <p>​            grade INT PRIMARY KEY,  -- 级别</p> <p>​            losalary INT, -- 最低工资</p> <p>​            hisalary INT -- 最高工资</p> <p>​           );</p> <p>​</p> <p>​           -- 添加5个工资等级</p> <p>​           INSERT INTO salarygrade(grade,losalary,hisalary) VALUES</p> <p>​           (1,7000,12000),</p> <p>​           (2,12010,14000),</p> <p>​           (3,14010,20000),</p> <p>​           (4,20010,30000),</p> <p>​           (5,30010,99990);</p> <p>​</p> <p>​           -- 需求：</p> <p>​</p> <p>​           -- 1.查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述</p> <p>​           /*</p> <p>​              分析：</p> <p>​                  1.员工编号，员工姓名，工资，需要查询emp表 职务名称，职务描述 需要查询job表</p> <p>​                  2.查询条件 emp.job_id = job.id</p> <p>​</p> <p>​           */</p> <p>​           SELECT</p> <p>​              t1.<code>id</code>, -- 员工编号</p> <p>​              t1.<code>ename</code>, -- 员工姓名</p> <p>​              t1.<code>salary</code>,-- 工资</p> <p>​              t2.<code>jname</code>, -- 职务名称</p> <p>​              t2.<code>description</code> -- 职务描述</p> <p>​           FROM</p> <p>​              emp t1, job t2</p> <p>​           WHERE</p> <p>​              t1.<code>job_id</code> = t2.<code>id</code>;</p> <p>​</p> <p>​</p> <p>​</p> <p>​           -- 2.查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置</p> <p>​           /*</p> <p>​              分析：</p> <p>​                  \1. 员工编号，员工姓名，工资 emp 职务名称，职务描述 job 部门名称，部门位置 dept</p> <p>​                  \2. 条件： emp.job_id = job.id and emp.dept_id = dept.id</p> <p>​           */</p> <p>​</p> <p>​           SELECT</p> <p>​              t1.<code>id</code>, -- 员工编号</p> <p>​              t1.<code>ename</code>, -- 员工姓名</p> <p>​              t1.<code>salary</code>,-- 工资</p> <p>​              t2.<code>jname</code>, -- 职务名称</p> <p>​              t2.<code>description</code>, -- 职务描述</p> <p>​              t3.<code>dname</code>, -- 部门名称</p> <p>​              t3.<code>loc</code> -- 部门位置</p> <p>​           FROM</p> <p>​              emp t1, job t2,dept t3</p> <p>​           WHERE</p> <p>​              t1.<code>job_id</code> = t2.<code>id</code> AND t1.<code>dept_id</code> = t3.<code>id</code>;</p> <p>​</p> <p>​           -- 3.查询员工姓名，工资，工资等级</p> <p>​           /*</p> <p>​              分析：</p> <p>​                  1.员工姓名，工资 emp 工资等级 salarygrade</p> <p>​                  2.条件 emp.salary &gt;= salarygrade.losalary and emp.salary &lt;= salarygrade.hisalary</p> <p>​                     emp.salary BETWEEN salarygrade.losalary and salarygrade.hisalary</p> <p>​           */</p> <p>​           SELECT</p> <p>​              t1.ename ,</p> <p>​              t1.<code>salary</code>,</p> <p>​              t2.*</p> <p>​           FROM emp t1, salarygrade t2</p> <p>​           WHERE t1.<code>salary</code> BETWEEN t2.<code>losalary</code> AND t2.<code>hisalary</code>;</p> <p>​</p> <p>​</p> <p>​</p> <p>​           -- 4.查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</p> <p>​           /*</p> <p>​              分析：</p> <p>​                  \1. 员工姓名，工资 emp ， 职务名称，职务描述 job 部门名称，部门位置，dept 工资等级 salarygrade</p> <p>​                  \2. 条件： emp.job_id = job.id and emp.dept_id = dept.id and emp.salary BETWEEN salarygrade.losalary and salarygrade.hisalary</p> <p>​</p> <p>​           */</p> <p>​           SELECT</p> <p>​              t1.<code>ename</code>,</p> <p>​              t1.<code>salary</code>,</p> <p>​              t2.<code>jname</code>,</p> <p>​              t2.<code>description</code>,</p> <p>​              t3.<code>dname</code>,</p> <p>​              t3.<code>loc</code>,</p> <p>​              t4.<code>grade</code></p> <p>​           FROM</p> <p>​              emp t1,job t2,dept t3,salarygrade t4</p> <p>​           WHERE</p> <p>​              t1.<code>job_id</code> = t2.<code>id</code></p> <p>​              AND t1.<code>dept_id</code> = t3.<code>id</code></p> <p>​              AND t1.<code>salary</code> BETWEEN t4.<code>losalary</code> AND t4.<code>hisalary</code>;</p> <p>​</p> <p>​</p> <p>​</p> <p>​           -- 5.查询出部门编号、部门名称、部门位置、部门人数</p> <p>​</p> <p>​           /*</p> <p>​              分析：</p> <p>​                  1.部门编号、部门名称、部门位置 dept 表。 部门人数 emp表</p> <p>​                  2.使用分组查询。按照emp.dept_id完成分组，查询count(id)</p> <p>​                  3.使用子查询将第2步的查询结果和dept表进行关联查询</p> <p>​           */</p> <p>​           SELECT</p> <p>​              t1.<code>id</code>,t1.<code>dname</code>,t1.<code>loc</code> , t2.total</p> <p>​           FROM</p> <p>​              dept t1,</p> <p>​              (SELECT</p> <p>​                  dept_id,COUNT(id) total</p> <p>​              FROM</p> <p>​                  emp</p> <p>​              GROUP BY dept_id) t2</p> <p>​           WHERE t1.<code>id</code> = t2.dept_id;</p> <p>​</p> <p>​</p> <p>​           -- 6.查询所有员工的姓名及其直接上级的姓名,没有领导的员工也需要查询</p> <p>​</p> <p>​           /*</p> <p>​              分析：</p> <p>​                  1.姓名 emp， 直接上级的姓名 emp</p> <p>​                     * emp表的id 和 mgr 是自关联</p> <p>​                  2.条件 emp.id = emp.mgr</p> <p>​                  3.查询左表的所有数据，和 交集数据</p> <p>​                     * 使用左外连接查询</p> <p>​           */</p> <p>​           /*</p> <p>​           select</p> <p>​              t1.ename,</p> <p>​              t1.mgr,</p> <p>​              t2.<code>id</code>,</p> <p>​              t2.ename</p> <p>​           from emp t1, emp t2</p> <p>​           where t1.mgr = t2.<code>id</code>;</p> <p>​</p> <p>​           */</p> <p>​</p> <p>​           SELECT</p> <p>​              t1.ename,</p> <p>​              t1.mgr,</p> <p>​              t2.<code>id</code>,</p> <p>​              t2.<code>ename</code></p> <p>​           FROM emp t1</p> <p>​           LEFT JOIN emp t2</p> <p>​           ON t1.<code>mgr</code> = t2.<code>id</code>;</p> <h2 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h2> <h3 id="事务的基本介绍"><a href="#事务的基本介绍" class="header-anchor">#</a> 事务的基本介绍</h3> <h4 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h4> <p>如果一个包含多个步骤的业务操作，被事务管理，那么这些操作要么同时成功，要么同时失败。</p> <h4 id="操作"><a href="#操作" class="header-anchor">#</a> 操作</h4> <ol><li><p>开启事务： start transaction;</p></li> <li><p>回滚：rollback;</p></li> <li><p>提交：commit;</p></li></ol> <h4 id="例子"><a href="#例子" class="header-anchor">#</a> 例子</h4> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE TABLE account (
	id INT PRIMARY KEY AUTO_INCREMENT,
	NAME VARCHAR(10),
	balance DOUBLE
);

-- 添加数据
INSERT INTO account (NAME, balance) VALUES ('zhangsan', 1000), ('lisi', 1000);

SELECT * FROM account;
UPDATE account SET balance = 1000;

-- 张三给李四转账 500 元
-- 0. 开启事务
START TRANSACTION;
-- 1. 张三账户 -500
UPDATE account SET balance = balance - 500 WHERE NAME = 'zhangsan';
-- 2. 李四账户 +500
-- 出错了...
UPDATE account SET balance = balance + 500 WHERE NAME = 'lisi';
-- 发现执行没有问题，提交事务
COMMIT;
-- 发现出问题了，回滚事务
ROLLBACK;
</code></pre></div><p>​</p> <h4 id="mysql数据库中事务默认自动提交"><a href="#mysql数据库中事务默认自动提交" class="header-anchor">#</a> MySQL数据库中事务默认自动提交</h4> <p>​       * 事务提交的两种方式：</p> <p>​           * 自动提交：</p> <p>​              * mysql就是自动提交的</p> <p>​              * 一条DML(增删改)语句会自动提交一次事务。</p> <p>​           * 手动提交：</p> <p>​              * Oracle 数据库默认是手动提交事务</p> <p>​              * 需要先开启事务，再提交</p> <p>​       * 修改事务的默认提交方式：</p> <p>​           * 查看事务的默认提交方式：SELECT @@autocommit; -- 1 代表自动提交 0 代表手动提交</p> <p>​           * 修改默认提交方式： set @@autocommit = 0;</p> <h3 id="事务的四大特征"><a href="#事务的四大特征" class="header-anchor">#</a> 事务的四大特征：</h3> <ol><li><p>原子性：是不可分割的最小操作单位，要么同时成功，要么同时失败。</p></li> <li><p>持久性：当事务提交或回滚后，数据库会持久化的保存数据。</p></li> <li><p>隔离性：多个事务之间。相互独立。</p></li> <li><p>一致性：事务操作前后，数据总量不变</p></li></ol> <h3 id="事务的隔离级别-了解"><a href="#事务的隔离级别-了解" class="header-anchor">#</a> 事务的隔离级别（了解）</h3> <p>​    * 概念：多个事务之间隔离的，相互独立的。但是如果多个事务操作同一批数据，则会引发一些问题，设置不同的隔离级别就可以解决这些问题。</p> <p>​    * 存在问题：</p> <p>​       \1. 脏读：一个事务，读取到另一个事务中没有提交的数据</p> <p>​       \2. 不可重复读(虚读)：在同一个事务中，两次读取到的数据不一样。</p> <p>​       \3. 幻读：一个事务操作(DML)数据表中所有记录，另一个事务添加了一条数据，则第一个事务查询不到自己的修改。</p> <p>​    * 隔离级别：</p> <p>​       \1. read uncommitted：读未提交</p> <p>​           * 产生的问题：脏读、不可重复读、幻读</p> <p>​       \2. read committed：读已提交 （Oracle）</p> <p>​           * 产生的问题：不可重复读、幻读</p> <p>​       \3. repeatable read：可重复读 （MySQL默认）</p> <p>​           * 产生的问题：幻读</p> <p>​       \4. serializable：串行化</p> <p>​           * 可以解决所有的问题</p> <p>​       * 注意：隔离级别从小到大安全性越来越高，但是效率越来越低</p> <p>​       * 数据库查询隔离级别：</p> <p>​           * select @@tx_isolation;</p> <p>​       * 数据库设置隔离级别：</p> <p>​           * set global transaction isolation level 级别字符串;</p> <p>​    * 演示：</p> <p>​       set global transaction isolation level read uncommitted;</p> <p>​       start transaction;</p> <p>​       -- 转账操作</p> <p>​       update account set balance = balance - 500 where id = 1;</p> <p>​       update account set balance = balance + 500 where id = 2;</p> <h2 id="dcl"><a href="#dcl" class="header-anchor">#</a> DCL</h2> <h3 id="sql分类"><a href="#sql分类" class="header-anchor">#</a> SQL分类</h3> <ol><li><p>DDL：操作数据库和表</p></li> <li><p>DML：增删改表中数据</p></li> <li><p>DQL：查询表中数据</p></li> <li><p>DCL：管理用户，授权</p></li></ol> <p>* DBA：数据库管理员</p> <p>* DCL：管理用户，授权</p> <p>​    \1. 管理用户</p> <p>​       \1. 添加用户：</p> <p>​           * 语法：CREATE USER '用户名'@'主机名' IDENTIFIED BY '密码';</p> <p>​       \2. 删除用户：</p> <p>​           * 语法：DROP USER '用户名'@'主机名';</p> <p>​       \3. 修改用户密码：</p> <p>​</p> <p>​           UPDATE USER SET PASSWORD = PASSWORD('新密码') WHERE USER = '用户名';</p> <p>​           UPDATE USER SET PASSWORD = PASSWORD('abc') WHERE USER = 'lisi';</p> <p>​</p> <p>​           SET PASSWORD FOR '用户名'@'主机名' = PASSWORD('新密码');</p> <p>​           SET PASSWORD FOR 'root'@'localhost' = PASSWORD('123');</p> <p>​           * mysql中忘记了root用户的密码？</p> <p>​              \1. cmd -- &gt; net stop mysql 停止mysql服务</p> <p>​                  * 需要管理员运行该cmd</p> <p>​              \2. 使用无验证方式启动mysql服务： mysqld --skip-grant-tables</p> <p>​              \3. 打开新的cmd窗口,直接输入mysql命令，敲回车。就可以登录成功</p> <p>​              \4. use mysql;</p> <p>​              \5. update user set password = password('你的新密码') where user = 'root';</p> <p>​              \6. 关闭两个窗口</p> <p>​              \7. 打开任务管理器，手动结束mysqld.exe 的进程</p> <p>​              \8. 启动mysql服务</p> <p>​              \9. 使用新密码登录。</p> <p>​       \4. 查询用户：</p> <p>​           -- 1. 切换到mysql数据库</p> <p>​           USE myql;</p> <p>​           -- 2. 查询user表</p> <p>​           SELECT * FROM USER;</p> <p>​</p> <p>​           * 通配符： % 表示可以在任意主机使用用户登录数据库</p> <p>​    \2. 权限管理：</p> <p>​       \1. 查询权限：</p> <p>​           -- 查询权限</p> <p>​           SHOW GRANTS FOR '用户名'@'主机名';</p> <p>​           SHOW GRANTS FOR 'lisi'@'%';</p> <p>​       \2. 授予权限：</p> <p>​           -- 授予权限</p> <p>​           grant 权限列表 on 数据库名.表名 to '用户名'@'主机名';</p> <p>​           -- 给张三用户授予所有权限，在任意数据库任意表上</p> <p>​</p> <p>​           GRANT ALL ON <em>.</em> TO 'zhangsan'@'localhost';</p> <p>​       \3. 撤销权限：</p> <p>​           -- 撤销权限：</p> <p>​           revoke 权限列表 on 数据库名.表名 from '用户名'@'主机名';</p> <p>​           REVOKE UPDATE ON db3.<code>account</code> FROM 'lisi'@'%';</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/sql/约束.html" class="prev">
        MySQL约束
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.656a9eeb.js" defer></script><script src="/assets/js/2.b8e5fd1e.js" defer></script><script src="/assets/js/84.e83b75ba.js" defer></script>
  </body>
</html>
